"use strict";let H,W,san,koi=[],X=100,Y=100,{hypot:hypot,atan2:atan2,sin:sin,cos:cos,random:random}=Math,animationId=null;class Koi{constructor(t,i){this.x=random()*W,this.y=random()*H,this.vx=3*random()+1,this.vy=0,this.s=.5,this.dx=0,this.dy=0,this.a=0,this.A=0,this.c0=360*random(),this.c1=`hsl(${this.c0},75%,50%)`,this.c2=`hsla(${this.c0},75%,50%,.25)`}draw(){this.update(),this.a+=hypot(this.vx,this.vy)/20;let t=sin(this.a),i=[50,15+5*t,-20,30+5*t,20,50+5*t,50,15+5*t,50,5*t-15,-20,5*t-30,20,5*t-50,50,5*t-15,100,0,100,-40,0,-10,-100,0+30*t,0,10,100,40,100,0,90,-6,90,6,70,0,-0,-0,-95,0+30*t,-130,0+40*t,-110,30*t-0,-150,0+30*t,-70,30*t-0,-130,0+40*t],s=[];for(let t=0;t<50;t+=2)s.push((i[t]*cos(this.A)-i[t+1]*sin(this.A))*this.s),s.push((i[t]*sin(this.A)+i[t+1]*cos(this.A))*this.s);san.beginPath(),san.fillStyle=this.c2,san.moveTo(this.x+s[0],this.y+s[1]),san.bezierCurveTo(this.x+s[2],this.y+s[3],this.x+s[4],this.y+s[5],this.x+s[6],this.y+s[7]),san.fill(),san.beginPath(),san.fillStyle=this.c2,san.moveTo(this.x+s[8],this.y+s[9]),san.bezierCurveTo(this.x+s[10],this.y+s[11],this.x+s[12],this.y+s[13],this.x+s[14],this.y+s[15]),san.fill(),san.beginPath(),san.fillStyle=this.c1,san.moveTo(this.x+s[16],this.y+s[17]),san.bezierCurveTo(this.x+s[18],this.y+s[19],this.x+s[20],this.y+s[21],this.x+s[22],this.y+s[23]),san.bezierCurveTo(this.x+s[24],this.y+s[25],this.x+s[26],this.y+s[27],this.x+s[28],this.y+s[29]),san.fill(),san.beginPath(),san.fillStyle="white",san.arc(this.x+s[30],this.y+s[31],1,0,44/7),san.arc(this.x+s[32],this.y+s[33],1,0,44/7),san.fill(),san.beginPath(),san.strokeStyle=this.c2,san.lineWidth=.5,san.moveTo(this.x+s[34],this.y+s[35]),san.quadraticCurveTo(this.x+s[36],this.y+s[37],this.x+s[38],this.y+s[39]),san.stroke(),san.beginPath(),san.fillStyle=this.c2,san.moveTo(this.x+s[40],this.y+s[41]),san.quadraticCurveTo(this.x+s[42],this.y+s[43],this.x+s[44],this.y+s[45]),san.quadraticCurveTo(this.x+s[46],this.y+s[47],this.x+s[48],this.y+s[49]),san.fill()}update(){this.rules(),this.vx+=.002*this.dx,this.vy+=.002*this.dy,this.x+=this.vx,this.y+=this.vy,this.A=atan2(this.vy,this.vx),this.x>W+100&&(this.x=-100),this.x<-100&&(this.x=W+100),this.y>H+100&&(this.y=-100),this.y<-100&&(this.y=H+100),this.dx=0,this.dy=0}rules(){let t=[];if(koi.forEach((i=>{i!=this&&hypot(i.x-this.x,i.y-this.y)<100&&t.push(i)})),0==t.length)return;let i=0,s=0;for(let h of t){let t=hypot(h.x-this.x,h.y-this.y);i-=(1-t/100)*(h.x-this.x),s-=(1-t/100)*(h.y-this.y)}this.dx+=i,this.dy+=s,this.vx*=.9995,this.vy*=.9995}}const M=t=>{X=2*t.touches[0].pageX,Y=2*t.touches[0].pageY},Loop=()=>{san.fillStyle="rgba(255,255,255,.25)",san.fillRect(0,0,W,H),san.fillStyle="red",san.fill(),koi.forEach((t=>t.draw())),animationId=webkitRequestAnimationFrame(Loop)},init=()=>{document.body.style.margin=0;const t=document.querySelector("canvas");t&&t.remove();let i=document.createElement("canvas");document.body.appendChild(i),i.style.position="fixed",i.style.top=0,i.style.left=0,i.style.zIndex="-1",i.style.background="white",i.style.width="100vw",i.style.height="100vh",i.height=H=2*innerHeight,i.width=W=2*innerWidth,san=i.getContext("2d");let s=window.innerWidth;if(koi.length=0,s<782)for(let t=0;t<10;t++)koi.push(new Koi(200,100+100*t));else if(s<1280)for(let t=0;t<15;t++)koi.push(new Koi(200,100+100*t));else for(let t=0;t<20;t++)koi.push(new Koi(200,100+100*t));i.ontouchmove=M,animationId&&cancelAnimationFrame(animationId),Loop()};onload=init,onresize=init;